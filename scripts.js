!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e,i){var n=i(1),r=i(2);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={insert:"head",singleton:!1},a=(n(r,o),r.locals?r.locals:{});t.exports=a},function(t,e,i){"use strict";var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),a=[];function s(t){for(var e=-1,i=0;i<a.length;i++)if(a[i].identifier===t){e=i;break}return e}function c(t,e){for(var i={},n=[],r=0;r<t.length;r++){var o=t[r],c=e.base?o[0]+e.base:o[0],l=i[c]||0,h="".concat(c," ").concat(l);i[c]=l+1;var d=s(h),u={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(a[d].references++,a[d].updater(u)):a.push({identifier:h,updater:g(u,e),references:1}),n.push(h)}return n}function l(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var r=i.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var a=o(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var h,d=(h=[],function(t,e){return h[t]=e,h.filter(Boolean).join("\n")});function u(t,e,i,n){var r=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=d(e,r);else{var o=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function m(t,e,i){var n=i.css,r=i.media,o=i.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var f=null,p=0;function g(t,e){var i,n,r;if(e.singleton){var o=p++;i=f||(f=l(e)),n=u.bind(null,i,o,!1),r=u.bind(null,i,o,!0)}else i=l(e),n=m.bind(null,i,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var i=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<i.length;n++){var r=s(i[n]);a[r].references--}for(var o=c(t,e),l=0;l<i.length;l++){var h=s(i[l]);0===a[h].references&&(a[h].updater(),a.splice(h,1))}i=o}}}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(0);function n(t,e){return Math.random()*(e-t)+t}function r(t,e,i,n,r,o,a,s){2===arguments.length&&(i=n=0,r=t.canvas.width,o=t.canvas.height),(a="number"==typeof a?a:.5)<0&&(a=0),(s="number"==typeof s?s:.5)<0&&(s=0),a>1&&(a=1),s>1&&(s=1);var c,l,h,d,u=e.width,m=e.height,f=Math.min(r/u,o/m),p=u*f,g=m*f,v=1;p<r&&(v=r/p),g<o&&(v=o/g),(c=(u-(h=u/((p*=v)/r)))*a)<0&&(c=0),(l=(m-(d=m/((g*=v)/o)))*s)<0&&(l=0),h>u&&(h=u),d>m&&(d=m),t.drawImage(e,c,l,h,d,i,n,r,o)}class o{constructor(t){Object.assign(this,t),this.tickLast=0}update(){this.x+=this.xVelocity,this.y+=this.yVelocity,this.yVelocity*=.998,this.alpha=Math.max(this.alpha-.002,0),this.scale+=.004,this.rotationVelocity*=.999,this.rotation+=this.rotationVelocity}render(){this.ctx.save(),this.ctx.globalAlpha=this.alpha,this.ctx.translate(this.x,this.y),this.ctx.rotate(this.rotation),this.ctx.scale(this.scale,this.scale),this.ctx.drawImage(this.smoke,-50,-50),this.ctx.restore()}}class a{constructor(t){this.canvas=t,this.ctx=t.getContext("2d"),this.particles=[],this.preloadResources()}preloadResources(){this.smokePromise=new Promise((t,e)=>{this.smoke=new Image,this.smoke.onload=()=>{t("Smoke image loaded")},this.smoke.onerror=()=>{e("Smoke image loading fail")},this.smoke.src="images/smoke.png"}),this.maskPromise=new Promise((t,e)=>{this.mask=new Image,this.mask.onload=()=>{this.calculateOrigin(),t("Smoke mask loaded")},this.mask.onerror=()=>{e("Smoke mask loading fail")},this.mask.src="images/smoke-mask.png"})}get ready(){return Promise.all([this.smokePromise,this.maskPromise])}calculateOrigin(){r(this.ctx,this.mask);const t=Math.floor(this.canvas.width/2),e=Math.floor(this.canvas.height/2),i=this.ctx.getImageData(t,e,t,e).data;for(let n=0;n<i.length;n+=4)if(255===i[n]&&0===i[n+1]&&0===i[n+2]){this.originX=t+n/4%t,this.originY=e+40+Math.floor(n/4/t);break}this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}startFactory(){let t=!0;const e=()=>{this.tick!==this.tickLast&&(this.tickLast=this.tick,this.createParticle(),this.particles.length>30&&this.particles.shift())};(()=>{clearInterval(this.factoryInterval),!t&&n(0,10)>6?t=!0:(this.factoryInterval=setInterval(e,n(600,1e3)),t=!1)})(),this.randomizerInterval=setInterval(this.randomizer,3e3)}stopFactory(){clearInterval(this.factoryInterval),clearInterval(this.randomizerInterval)}createParticle(){this.particles.push(new o({ctx:this.ctx,smoke:this.smoke,x:this.originX,y:this.originY,xVelocity:n(-.1,.1),yVelocity:n(-.8,-.4),scale:n(.4,.5),rotation:n(1,360)*Math.PI/180,rotationVelocity:n(-.005,.005),alpha:1}))}render(t){this.tick=t,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.globalCompositeOperation="source-over",this.particles.forEach((t,e)=>{t.update(),t.render()}),this.ctx.globalCompositeOperation="destination-out",r(this.ctx,this.mask)}}function s(){const t=document.querySelector(".section-top__background").dataset.img,e=new Image;return new Promise((i,n)=>{e.onload=()=>{document.querySelector(".section-top").classList.add("is-loaded"),i("Background image loaded")},e.onerror=()=>{n("Background image loading fail")},e.src=t})}!function(){let t=!0;const e=document.getElementById("line-canvas"),i=document.getElementById("smoke-canvas"),r=document.querySelector(".toggle-animation"),o=r.querySelector(".canvas-controls__description"),c=()=>{e.width=document.body.clientWidth,e.height=window.innerHeight,i.width=document.body.clientWidth,i.height=window.innerHeight};c(),function(){const t=document.querySelector(".section-top__flame"),e=document.querySelector(".site-description");setInterval(()=>{t.style.opacity=Math.random(),e.style.opacity=n(.85,1)},200)}();const l=new a(i),h=Promise.all([s(),l.ready]);let d=0;const u=()=>{d++,d%=1e3,l.render(d),t&&window.requestAnimationFrame(u)},m=()=>{t=!0,l.startFactory(),u()},f=()=>{t=!1,l.stopFactory()},p=()=>{window.innerWidth<768?t&&f():(t||m(),c(),l.calculateOrigin())};p(),window.addEventListener("resize",p),window.innerWidth>=768&&h.then(m).catch(t=>{console.log("Preloading failed!",t)}),r.addEventListener("click",()=>{r.classList.toggle("is-paused"),t?(f(),o.textContent="Resume animation",r.setAttribute("aria-pressed",!0)):(m(),o.textContent="Pause animation",r.setAttribute("aria-pressed",!1))})}()}]);